# {{SEQUENCE_NAME}} Sequence Manifest
# 시퀀스 메타데이터 정의

name: {{SEQUENCE_NAME}}
version: "1.0.0"
author: "{{AUTHOR}}"
description: |
  {{DESCRIPTION}}

# 실행 모드 설정
modes:
  automatic: true      # 자동 순차 실행
  manual: true         # 수동 스텝별 실행
  interactive: false

# 진입점 설정
entry_point:
  module: sequence
  class: {{CLASS_NAME}}

# 하드웨어 정의
hardware:
  {{DEVICE_ID}}:
    display_name: "{{DEVICE_DISPLAY_NAME}}"
    driver: {{DRIVER_MODULE}}
    class: {{DRIVER_CLASS}}
    description: "{{DEVICE_DESCRIPTION}}"
    config_schema:
      port:
        type: string
        required: false
        default: "/dev/ttyUSB0"
        description: "시리얼 포트"
      baudrate:
        type: integer
        required: false
        default: 115200
        description: "통신 속도 (bps)"
      timeout:
        type: float
        required: false
        default: 5.0
        min: 1.0
        max: 30.0
        description: "응답 대기 타임아웃 (초)"
    manual_commands:
      - name: ping
        display_name: "연결 확인"
        category: diagnostic
        description: "장치 연결 상태 확인"
        parameters: []
        returns:
          type: string
          description: "응답 문자열"

      - name: measure
        display_name: "측정"
        category: measurement
        description: "값 측정"
        parameters: []
        returns:
          type: float
          description: "측정값"

# 시퀀스 파라미터
parameters:
  target_value:
    display_name: "목표값"
    type: float
    default: 10.0
    min: 0.0
    max: 100.0
    unit: ""
    description: "테스트 목표값"

  tolerance_percent:
    display_name: "허용 오차"
    type: float
    default: 5.0
    min: 0.1
    max: 20.0
    unit: "%"
    description: "허용 오차 비율"

# 스텝 정의
steps:
  - name: initialize
    display_name: "하드웨어 초기화"
    order: 1
    timeout: 30.0
    manual:
      skippable: false
      auto_only: false
      prompt: null
      pause_before: false
      pause_after: false

  - name: run_test
    display_name: "테스트 실행"
    order: 2
    timeout: 60.0
    retry: 1
    manual:
      skippable: true
      prompt: "테스트를 시작하시겠습니까?"
      pause_before: false
      pause_after: false
      parameter_overrides:
        - target_value
        - tolerance_percent

  - name: finalize
    display_name: "정리"
    order: 99
    timeout: 10.0
    cleanup: true
    manual:
      skippable: false
      auto_only: false

# Python 의존성
# 시퀀스 업로드 시 자동으로 pip install 됩니다.
# 내부 커스텀 라이브러리는 libs/ 폴더에 포함하세요.
dependencies:
  python:
    - pyserial>=3.5
    # - numpy>=1.20.0
    # - requests>=2.25.0
