# 5.3 LOT 및 시리얼 번호 체계

[← 목차로 돌아가기](../../README.md)

> **참고:** LOT 및 시리얼 번호 체계의 상세 내용은 [2.6 LOT 및 시리얼 번호 체계](../02-product-process.md#26-lot-및-시리얼-번호-체계)를 참조하세요.

## 5.3.1 LOT 번호 형식

**형식:** `{생산라인코드}{제품모델코드}{YYMM}{일련번호}`

**예시:** `KR01PSA2511001`

| 요소 | 설명 | 예시 | 자릿수 |
|------|------|------|---------|
| 생산라인코드 | 국가코드(2) + 라인번호(2) | KR01 | 4 |
| 제품모델코드 | 제품 모델 코드 | PSA | 3 |
| YYMM | 생산 년월 | 2511 | 4 |
| 일련번호 | 월별 순번 | 001 | 3 |

**총 길이:** 14자리


## 5.3.2 시리얼 번호 형식

**형식:** `{LOT번호}{순번}`

**예시:** `KR01PSA25110010001`

| 요소 | 설명 | 예시 | 자릿수 |
|------|------|------|---------|
| LOT번호 | 상위 LOT 번호 | KR01PSA2511001 | 14 |
| 순번 | LOT 내 순번 | 0001 | 4 |

**총 길이:** 18자리

- LOT당 0001~0100 (100개)
- Label Printing 공정에서 순차 생성


## 5.3.3 WIP ID 포맷

### 개요

WIP (Work In Progress) ID는 공정 1~6에서 개별 제품을 추적하는 임시 식별자입니다.

### 포맷 규칙

**형식**: `WIP-{LOT}-{SEQ:03d}`

**구성 요소**:

| 구성요소 | 길이 | 설명 | 예시 |
|---------|------|------|------|
| 접두어 | 4자 | "WIP-" 고정 | WIP- |
| LOT 번호 | 11자 | LOT 번호 (5.3.1 참조) | KR01PSA2511 |
| 구분자 | 1자 | "-" 고정 | - |
| 순번 | 3자 | 001~100, zero-padding | 001 |
| **전체** | **19자** | | **WIP-KR01PSA2511-001** |

### 생성 규칙

1. **LOT 기반 생성**:
   - LOT 번호를 기반으로 WIP ID 생성
   - LOT 하나당 최대 100개 WIP 생성 가능

2. **순번 규칙**:
   - 시작: 001
   - 종료: 100
   - Zero-padding: 3자리 (예: 001, 010, 100)
   - LOT 내에서 중복 불가

3. **고유성**:
   - WIP ID는 전역적으로 고유
   - LOT + 순번 조합으로 중복 방지
   - 예: WIP-KR01PSA2511-001, WIP-KR01PSA2512-001 (다른 WIP)

### 유효성 검증

**정규식**:

```regex
^WIP-([A-Z0-9]{11})-(\d{3})$
```

**검증 규칙**:

1. 접두어가 "WIP-"인지 확인
2. LOT 번호가 11자리인지 확인
3. 순번이 001~100 범위인지 확인
4. 총 길이가 19자인지 확인

**유효한 예시**:

- `WIP-KR01PSA2511-001` ✅ (첫 번째 WIP)
- `WIP-KR01PSA2511-100` ✅ (마지막 WIP)
- `WIP-US02PSB2512-050` ✅ (50번째 WIP)

**무효한 예시**:

- `WIP-KR01PSA2511-1` ❌ (zero-padding 누락)
- `WIP-KR01PSA2511-101` ❌ (최대값 초과)
- `KR01PSA2511-W001` ❌ (형식 불일치)
- `WIP-KR01PSA25-001` ❌ (LOT 길이 부족)

### Serial Number와 비교

| 항목 | WIP ID | Serial Number |
|------|--------|---------------|
| **목적** | 공정 중 임시 추적 | 최종 제품 식별 |
| **사용 시점** | 공정 1~6 | 공정 7~8 |
| **포맷** | `WIP-{LOT}-{SEQ:03d}` | `{LOT}{SEQ:04d}` |
| **예시** | `WIP-KR01PSA2511-001` | `KR01PSA25110001` |
| **길이** | 19자 | 15자 |
| **순번 범위** | 001~100 | 0001~0100 |
| **전환** | 공정 7에서 Serial로 전환 | 영구 사용 |

### 바코드 인코딩

**지원 형식**:

- Code128 (권장)
- QR Code

**인코딩 값**: WIP ID 문자열 그대로 사용

- 예: `WIP-KR01PSA2511-001`

**바코드 레이블**:

- 크기: 40mm x 20mm
- 인쇄 위치: 공정 1 (레이저 마킹 후 스티커)
- 내구성: 공정 1~6 동안 판독 가능해야 함

### 데이터베이스 저장

**컬럼 타입**: `VARCHAR(19)`

**제약 조건**:

```sql
CREATE TABLE wip_items (
    wip_id VARCHAR(19) NOT NULL UNIQUE,
    CONSTRAINT chk_wip_id_format CHECK (
        wip_id ~ '^WIP-[A-Z0-9]{11}-\d{3}$'
    )
);
```

### 참고사항

1. **LOT 번호 의존성**:
   - WIP ID는 LOT 번호에 종속됨
   - LOT 번호 형식이 변경되면 WIP ID도 영향받음

2. **전환 시점**:
   - 공정 7 시작 시 WIP ID → Serial Number 전환
   - 전환 후에는 WIP ID 사용 중지

3. **보관 기간**:
   - WIP 데이터는 Serial 전환 후에도 보관 (이력 추적)
   - 권장 보관 기간: 1년

---

**이전 섹션:** [5.1 ERD 및 데이터베이스 스키마](05-1-erd.md)
**다음 섹션:** [6. 개발 및 투자 계획](../06-investment.md)
